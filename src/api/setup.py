from src.api.handlers import CommandHandler
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton, InlineKeyboardMarkup, InlineKeyboardButton

token = "8090759361:AAGkfIL43EeWm5NJ7CZt3I8C-ReUZktRH_U"

current_state = 0
'''
1 - —ç—Ç–æ —Å—Ç–∞—Ä—Ç –∏ –ø–æ–º–æ—â—å
2 - —ç—Ç–æ –≤—Å–µ –∑–∞–¥–∞—á–∏
3 - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞
'''


nav_buttons = [
    ["üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á"],  # –û–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤ —Å—Ç—Ä–æ–∫–µ
    ["‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É", "‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏"],  # –î–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ
]

nav_keyboard = ReplyKeyboardMarkup(
    keyboard=[[KeyboardButton(text=btn) for btn in row] for row in nav_buttons],
    resize_keyboard=True  # –ü–æ–¥–≥–æ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–¥ —ç–∫—Ä–∞–Ω
)

commands = [
    func[:-8] for func in dir(CommandHandler)  
    if callable(getattr(CommandHandler, func)) and func.endswith("_command")
]
#–∑–∞–¥–∞—á–∏ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞
"""
0 - title
1 - subtasks
2 - priority
3 - status
4 - deadline
"""
task_buttons = [
    ["–ü–æ–ª–∏—Ç—å —Ü–≤–µ—Ç—ã", [], 1, 1, "2030-02-20"],
    ["–ü–æ–∫–æ—Ä–º–∏—Ç—å –∫–æ—Ç–∞", [], 2, 2, "2020-12-01"],
]

task_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=task[0], callback_data=f"task:{index}")]
        for index, task in enumerate(task_buttons)
    ]
)

task_edit_buttons = [
    ["‚û° –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å üîÑ", "edit_task:0"],
    ["‚û° –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É ‚ûï", "add_subtasks:0"],
    ["‚û° –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç üî•", "change_priority:0"],
    ["‚û° –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å ‚úÖ", "change_status:0"],
    ["‚û° –ò–∑–º–µ–Ω–∏—Ç—å –¥–µ–¥–ª–∞–π–Ω ‚è≥", "change_deadline:0"],
]

task_edit_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1] if len(btn) > 1 else btn[0])]
        for btn in task_edit_buttons
    ]
)

task_priority_edit_buttons = [
    ["1Ô∏è‚É£ –í—ã—Å–æ–∫–∏–π (üî• –°—Ä–æ—á–Ω–æ)", "High", "üî• –°—Ä–æ—á–Ω–æ", 1],
    ["2Ô∏è‚É£ –°—Ä–µ–¥–Ω–∏–π (‚è≥ –û–±—ã—á–Ω—ã–π)", "Medium", "‚è≥ –û–±—ã—á–Ω—ã–π", 2],
    ["3Ô∏è‚É£ –ù–∏–∑–∫–∏–π (‚úÖ –ú–æ–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å)", "Low", "‚úÖ –ú–æ–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å", 3],
]

task_priority_edit_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1] if len(btn) > 1 else btn[0])]
        for btn in task_priority_edit_buttons
    ]
)

task_status_edit_buttons = [
    ["–ù–æ–≤–∞—è üìÉ", "New", 1],
    ["–í –ø—Ä–æ—Ü–µ—Å—Å–µ ‚è≥", "In_Progress", 2],
    ["–û—Ç–ª–æ–∂–µ–Ω–∞ üîÑ", "On_Hold", 3],
    ["–ó–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ", "Completed", 4],
]

task_status_edit_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1] if len(btn) > 1 else btn[0])]
        for btn in task_status_edit_buttons
    ]
)

auth_button = [
    ["–í—Ö–æ–¥", "enter"],
    ["–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è", "register"],
]

auth_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1] if len(btn) > 1 else btn[0])]
        for btn in auth_button
    ]
)


# –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–æ—á–µ–µ"
misc_buttons = [
    ["üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", "misc_notifications"],
    ["‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏", "misc_settings"],
    ["‚úÖ –ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å", "misc_task_filter"],
    ["üî¢ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∑–∞–¥–∞—á", "misc_task_sorting"],
    ["üë§ –õ–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å", "misc_profile"],
]

misc_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1])]
        for btn in misc_buttons
    ]
)

# –ö–Ω–æ–ø–∫–∏ –¥–ª—è "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
misc_notifications_buttons = [
    ["üì¢ –ü–æ–∫–∞–∑—ã–≤–∞—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", "toggle_notifications"],
    ["üïí –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞–¥–∞—á–∞—Ö", "toggle_reminders"],
    ["‚è≥ –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö", "toggle_overdue"],
    ["üöÄ –ò–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (3—á, 6—á, 12—á)", "set_notification_interval"],
]

misc_notifications_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1])]
        for btn in misc_notifications_buttons
    ]
)

# –ö–Ω–æ–ø–∫–∏ –¥–ª—è "–ù–∞—Å—Ç—Ä–æ–µ–∫"
misc_settings_buttons = [
    ["üîï –û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", "disable_notifications"],
    ["‚è∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ (24—á / 12—á)", "set_time_format"],
    ["üåé –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å", "set_timezone"],
    ["üé® –í—ã–±–æ—Ä —Ç–µ–º—ã (–°–≤–µ—Ç–ª–∞—è / –¢—ë–º–Ω–∞—è)", "set_theme"],
    ["üóë –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (7/30 –¥–Ω–µ–π)", "set_auto_delete"],
    ["üîÅ –ê–≤—Ç–æ–ø–µ—Ä–µ–Ω–æ—Å –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á", "set_auto_move"],
    ["üåê –°–º–µ–Ω–∞ —è–∑—ã–∫–∞", "set_language"],
]

misc_settings_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1])]
        for btn in misc_settings_buttons
    ]
)

# –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á
misc_task_filter_buttons = [
    ["üìå –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ", "filter_active"],
    ["‚ùå –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ", "filter_completed"],
    ["üî¥ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ", "filter_overdue"],
    ["‚ö† –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º", "filter_high_priority"],
    ["üìÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è", "filter_today"],
]

misc_task_filter_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1])]
        for btn in misc_task_filter_buttons
    ]
)

# –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∑–∞–¥–∞—á
misc_task_sorting_buttons = [
    ["üîº –ü–æ –¥–∞—Ç–µ (—Ä–∞–Ω—å—à–µ ‚Üí –ø–æ–∑–∂–µ)", "sort_date_asc"],
    ["üîΩ –ü–æ –¥–∞—Ç–µ (–ø–æ–∑–∂–µ ‚Üí —Ä–∞–Ω—å—à–µ)", "sort_date_desc"],
    ["‚ö° –ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (–≤—ã—Å–æ–∫–∏–π ‚Üí –Ω–∏–∑–∫–∏–π)", "sort_priority"],
    ["üÜï –ü–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è", "sort_creation_date"],
    ["üî† –ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É", "sort_alphabetically"],
    ["üîÑ –°–±—Ä–æ—Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏", "sort_reset"],
]

misc_task_sorting_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1])]
        for btn in misc_task_sorting_buttons
    ]
)

# –ö–Ω–æ–ø–∫–∏ –¥–ª—è "–õ–∏—á–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è"
misc_profile_buttons = [
    ["‚úè –ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è", "edit_name"],
    ["üì¶ –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–¥–∞—á (JSON / TXT)", "export_tasks"],
    ["üîÑ –°–±—Ä–æ—Å –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫", "reset_settings"],
    ["üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–¥–∞—á–∞–º", "task_statistics"],
]

misc_profile_keyboard = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text=btn[0], callback_data=btn[1])]
        for btn in misc_profile_buttons
    ]
)

notifications = [
    ["–í—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥", "2025-01-01"],
    ["–ó–∞–¥–∞—á–∞ –ü–æ–ª–∏—Ç—å —Ü–≤–µ—Ç—ã –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞!", "2024-08-21"]
]
user_id = "14"
nickname = "Deimos"
password = "1s"
active_codes = {}  # –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è


